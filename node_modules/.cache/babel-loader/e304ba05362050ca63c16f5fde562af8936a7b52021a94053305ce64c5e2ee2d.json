{"ast":null,"code":"// frontend/src/api/api.js\n// Centralized place for frontend API calls\n\n// Determine the API base URL based on the environment\n// In a real Vercel deployment, REACT_APP_API_URL would be set to your backend URL.\n// For local development, it might point to http://localhost:5000 (or your backend port).\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n/**\r\n * Registers or logs in a user.\r\n * Sends username and profile picture file to the backend.\r\n * @param {FormData} userData - FormData object containing 'username' and 'profilePicture' (File object).\r\n * @returns {Promise<Object>} - A promise that resolves to the backend response.\r\n */\nexport const registerUser = async userData => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/auth/register`, {\n      method: 'POST',\n      // When sending FormData, the 'Content-Type' header is automatically set to 'multipart/form-data'\n      // by the browser, so we don't explicitly set it here.\n      body: userData // Pass the FormData object directly\n    });\n\n    // Check if the response is OK (status code 200-299)\n    if (!response.ok) {\n      const errorData = await response.json();\n      // Throw an error with the backend's message for better error handling\n      throw new Error(errorData.message || 'Failed to register/login user.');\n    }\n    return await response.json(); // Parse and return the JSON response\n  } catch (error) {\n    console.error('API Error (registerUser):', error);\n    // Return a structured error object for the frontend to handle\n    return {\n      success: false,\n      message: error.message || 'Network error or server issue.'\n    };\n  }\n};\n\n/**\r\n * Sends the selected team to the backend to update the user's profile.\r\n * @param {string} userId - The ID of the user whose team is being selected.\r\n * @param {string} teamName - The name of the team selected by the user.\r\n * @returns {Promise<Object>} - A promise that resolves to the backend response.\r\n */\nexport const selectUserTeam = async (userId, teamName) => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/teams/select`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n        // You might add an Authorization header here if using JWT tokens for authenticated requests\n        // 'Authorization': `Bearer ${localStorage.getItem('token')}`\n      },\n      body: JSON.stringify({\n        userId,\n        teamName\n      })\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to select team.');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('API Error (selectUserTeam):', error);\n    return {\n      success: false,\n      message: error.message || 'Network error or server issue.'\n    };\n  }\n};\n\n/**\r\n * Fetches a specified number of random questions from the backend for the game.\r\n * @param {number} limit - The number of questions to fetch.\r\n * @returns {Promise<Object>} - A promise that resolves to the backend response containing questions.\r\n */\nexport const getGameQuestions = async (limit = 10) => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/game/questions?limit=${limit}`);\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to fetch game questions.');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('API Error (getGameQuestions):', error);\n    return {\n      success: false,\n      message: error.message || 'Network error or server issue.'\n    };\n  }\n};\n\n/**\r\n * Updates a user's game score and session status on the backend.\r\n * @param {Object} scoreData - Object containing game session details.\r\n * @returns {Promise<Object>} - A promise that resolves to the backend response.\r\n */\nexport const updateGameScore = async scoreData => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/scores/update`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(scoreData)\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to update game score.');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('API Error (updateGameScore):', error);\n    return {\n      success: false,\n      message: error.message || 'Network error or server issue.'\n    };\n  }\n};\n\n/**\r\n * Fetches the overall leaderboard data from the backend.\r\n * @returns {Promise<Array>} - A promise that resolves to an array of leaderboard entries.\r\n */\nexport const getLeaderboard = async () => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/scores/leaderboard`);\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Failed to fetch leaderboard data.');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('API Error (getLeaderboard):', error);\n    // Return an empty array or a structured error if fetching fails, depending on desired behavior\n    return []; // Return empty array for now, LeaderboardPage handles error state\n  }\n};","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","registerUser","userData","response","fetch","method","body","ok","errorData","json","Error","message","error","console","success","selectUserTeam","userId","teamName","headers","JSON","stringify","getGameQuestions","limit","updateGameScore","scoreData","getLeaderboard"],"sources":["C:/Users/HELLO/Desktop/provernaire-game/frontend/src/api/api.js"],"sourcesContent":["// frontend/src/api/api.js\r\n// Centralized place for frontend API calls\r\n\r\n// Determine the API base URL based on the environment\r\n// In a real Vercel deployment, REACT_APP_API_URL would be set to your backend URL.\r\n// For local development, it might point to http://localhost:5000 (or your backend port).\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n/**\r\n * Registers or logs in a user.\r\n * Sends username and profile picture file to the backend.\r\n * @param {FormData} userData - FormData object containing 'username' and 'profilePicture' (File object).\r\n * @returns {Promise<Object>} - A promise that resolves to the backend response.\r\n */\r\nexport const registerUser = async (userData) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/auth/register`, {\r\n      method: 'POST',\r\n      // When sending FormData, the 'Content-Type' header is automatically set to 'multipart/form-data'\r\n      // by the browser, so we don't explicitly set it here.\r\n      body: userData, // Pass the FormData object directly\r\n    });\r\n\r\n    // Check if the response is OK (status code 200-299)\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      // Throw an error with the backend's message for better error handling\r\n      throw new Error(errorData.message || 'Failed to register/login user.');\r\n    }\r\n\r\n    return await response.json(); // Parse and return the JSON response\r\n  } catch (error) {\r\n    console.error('API Error (registerUser):', error);\r\n    // Return a structured error object for the frontend to handle\r\n    return { success: false, message: error.message || 'Network error or server issue.' };\r\n  }\r\n};\r\n\r\n/**\r\n * Sends the selected team to the backend to update the user's profile.\r\n * @param {string} userId - The ID of the user whose team is being selected.\r\n * @param {string} teamName - The name of the team selected by the user.\r\n * @returns {Promise<Object>} - A promise that resolves to the backend response.\r\n */\r\nexport const selectUserTeam = async (userId, teamName) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/teams/select`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        // You might add an Authorization header here if using JWT tokens for authenticated requests\r\n        // 'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n      },\r\n      body: JSON.stringify({ userId, teamName }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || 'Failed to select team.');\r\n    }\r\n\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('API Error (selectUserTeam):', error);\r\n    return { success: false, message: error.message || 'Network error or server issue.' };\r\n  }\r\n};\r\n\r\n/**\r\n * Fetches a specified number of random questions from the backend for the game.\r\n * @param {number} limit - The number of questions to fetch.\r\n * @returns {Promise<Object>} - A promise that resolves to the backend response containing questions.\r\n */\r\nexport const getGameQuestions = async (limit = 10) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/game/questions?limit=${limit}`);\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || 'Failed to fetch game questions.');\r\n    }\r\n\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('API Error (getGameQuestions):', error);\r\n    return { success: false, message: error.message || 'Network error or server issue.' };\r\n  }\r\n};\r\n\r\n/**\r\n * Updates a user's game score and session status on the backend.\r\n * @param {Object} scoreData - Object containing game session details.\r\n * @returns {Promise<Object>} - A promise that resolves to the backend response.\r\n */\r\nexport const updateGameScore = async (scoreData) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/scores/update`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(scoreData),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || 'Failed to update game score.');\r\n    }\r\n\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('API Error (updateGameScore):', error);\r\n    return { success: false, message: error.message || 'Network error or server issue.' };\r\n  }\r\n};\r\n\r\n/**\r\n * Fetches the overall leaderboard data from the backend.\r\n * @returns {Promise<Array>} - A promise that resolves to an array of leaderboard entries.\r\n */\r\nexport const getLeaderboard = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/scores/leaderboard`);\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || 'Failed to fetch leaderboard data.');\r\n    }\r\n\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('API Error (getLeaderboard):', error);\r\n    // Return an empty array or a structured error if fetching fails, depending on desired behavior\r\n    return []; // Return empty array for now, LeaderboardPage handles error state\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}